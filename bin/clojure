#!/usr/bin/env bash
set -euo pipefail

PROJECT_DIR="$(cd -- "$(dirname "${BASH_SOURCE}")" ; cd .. > /dev/null 2>&1 && pwd -P)"
${PROJECT_DIR}/bin/env/java-setup
${PROJECT_DIR}/bin/env/clojure-setup

# Ensure clojure is in PATH
source $PROJECT_DIR/bin/env/select-tool-versions-manager
case "$TOOL_VERSIONS_MANAGER" in
  mise)
    eval "$(mise activate bash --shims)"
    ;;
  asdf|asdf-vm)
    source "$PROJECT_DIR/bin/env/asdf-helper.bash"
    asdf-load
    ;;
esac

clojure "$@"

# vi: ft=sh
